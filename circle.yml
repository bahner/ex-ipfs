version: 1
jobs:
  build: 
    docker:
      - image: circleci/elixir:1.5.2
      - image: circleci/golang:1.9
    steps: 
    - checkout
    - run: curl https://dist.ipfs.io/go-ipfs/v0.4.11/go-ipfs_v0.4.11_linux-amd64.tar.gz
    - run: tar -xzf go-ipfs_v0.4.11_linux-amd64.tar.gz
    - run: mv go-ipfs/ipfs /usr/local/bin/ipfs
    - run: ipfs daemon
    - run: mix local.rebar --force
    - run: mix local.hex --force
    - run: mix deps.get
    - run: mix test
